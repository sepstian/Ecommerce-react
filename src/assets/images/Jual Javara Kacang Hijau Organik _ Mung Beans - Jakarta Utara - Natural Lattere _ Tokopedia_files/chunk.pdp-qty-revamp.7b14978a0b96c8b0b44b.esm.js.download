(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[525],{2893:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"b",(function(){return s})),a.d(e,"a",(function(){return u}));var n=a(0),r=a(1125),i=a(1285),o=a.n(i),c=a(8),l=a(1138);const d=t=>{const{productParentId:e,productId:a,shopId:i,userId:d,layoutTracker:s}=t,{enqueueTask:u}=Object(r.useIdleQueue)(),p=Object(n.useCallback)((t=>{u({task:()=>{c.default.pushObject(t)},delay:15e3})}),[u]),m=Object(n.useCallback)((t=>{const{productChildId:e,variantName:a,variantValue:n,position:r}=t;return{creative:null,id:`product_child_id:${e};`,name:`variant_name:${a}; variant_value:${n};`,position:r}}),[]),b=Object(n.useCallback)((t=>{const n={...Object(l.c)({...s,eventAction:"hover - choose product variant"}),event:"promoView",eventAction:"hover - choose product variant",eventCategory:"product detail page",eventLabel:`product_parent_id:${e};`,trackerId:"35369",businessUnit:"product detail page",currentSite:"tokopediamarketplace",ecommerce:{promoView:{promotions:t}},productId:a,shopId:i,userId:d};p(n)}),[p,s,e,a,i,d]);return o()({timeout:6e3,threshold:10,onHitCallback:m,onBatchCallback:b})},s=t=>{const{productParentId:e,productChildId:a,variantLevel:n,variantName:r,variantValue:i,layoutTracker:o,productId:d,shopId:s,userId:u}=t;c.default.pushObject({...Object(l.c)({...o,eventAction:"click - choose product variant"}),event:"clickPG",eventAction:"click - choose product variant",eventCategory:"product detail page",eventLabel:`product_parent_id:${e};product_child_id:${a};variant_level:${n};variant_name:${r};variant_value:${i};`,trackerId:"35370",businessUnit:"product detail page",currentSite:"tokopediamarketplace",productId:d,shopId:s,userId:u})},u=t=>{const{layoutTracker:e,productId:a,productChildId:n,variantLevel:r,variantName:i,variantValue:o,shopId:d,userId:s}=t;c.default.pushObject({...Object(l.c)({...e,eventAction:"click - choose product variant"}),event:"clickPG",eventAction:"click - thumbnail selected variant",eventCategory:"product detail page",eventLabel:`action:back to top;product_parent_id:${a};product_child_id:${n};variant_level:${r};variant_name:${i};variant_value:${o};`,trackerId:"37320",businessUnit:"product detail page",currentSite:"tokopediamarketplace",productId:a,shopId:d,userId:s})}},3003:function(t,e,a){"use strict";e.a=(t="")=>t.includes("?")},3841:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(40),o=a(1387),c=a(1),l=a(148),d=a.n(l),s=a(632),u=a.n(s),p=a(1163),m=a.n(p),b=a(122),v=a(59),g=a(9),h=a(1100),k=a(1192),N=a(1406),f=a(3482),O=a(2893),I=a(308),y=a(3003),C=a(2);const j=Object(C.css)("display:flex;justify-content:space-between;align-items:center;"),S=Object(C.css)("font-weight:bold;font-size:18px;line-height:26px;"),E=Object(C.css)("line-height:20px;text-align:right;"),x=Object(C.css)("margin:16px 0;");var D=({usedCampaign:t,quantity:e,productWholesale:a})=>{const o=e>0,l=t.isActive&&!t.hideGimmick&&o,d=Object(n.useMemo)((()=>{var n;if(a.length<1)return t.priceUnformatted*e;a.sort(((t,e)=>t.minQty<e.minQty?-1:t.minQty>e.minQty?1:0));const r=a.filter((t=>e>=t.minQty)),i=r[r.length-1];return i?((null===(n=i.price)||void 0===n?void 0:n.value)||t.priceUnformatted)*e:t.priceUnformatted*e}),[a,e,t.priceUnformatted]);let s=0;s=a.length>0?d:t.priceUnformatted*e;const u=Object(y.a)(t.priceFmt)?t.priceFmt:`Rp${m()(String(s))}`;return r.a.createElement("div",{className:x},l&&r.a.createElement(i.default,{color:c.NN400,margin:"0 0 2px",body:"display-3",className:E},r.a.createElement("del",{"data-testid":"pdpSlashPrice"},r.a.createElement("span",{className:I.b},"harga sebelum diskon"),t.slashPriceFmt||`Rp${m()(String(t.originalPriceUnformatted*e))}`)),r.a.createElement("div",{className:j},r.a.createElement(i.default,{margin:"0",body:"display-2"},"Subtotal"),r.a.createElement(i.default,{margin:"0","data-testid":"pdpProductPrice",className:S,main:!0},o?u:"-")))},_=a(1531),A=a(1138),$=a(2057),P=a(31);const T=Object(C.css)("margin:12px 0 20px;font-weight:800;font-size:16px;line-height:22px;color:",c.NN950,";text-align:left;"),V=Object(C.css)("margin-top:8px;font-weight:bold;line-height:20px;padding:0;border:none;outline:none;background:none;color:",c.GN500,";font-weight:bold;cursor:pointer;"),L=Object(C.css)("p{&:first-of-type{margin-top:8px;}&:last-of-type{margin-bottom:8px;}}"),w=Object(C.css)("display:flex;align-items:center;input[type='text']{}p{font-size:1rem;line-height:20px;margin:0;margin-left:",P.spacingLv3,";color:",c.NN950,";}"),U=Object(C.css)("margin-top:16px !important;button{display:flex;align-items:center;font-size:12px;background:none;padding:0;border:none;color:",c.GN500,";cursor:pointer;> svg{margin-right:4px;}}"),B=Object(C.css)("input[type='text']&{width:100%;height:40px;padding:10px 16px;margin:0;border:1px solid ",c.NN100,";background:",c.NN0,";border-radius:8px;box-shadow:none;color:",c.NN950,";line-height:",$.lineHeight.lvl3,";font-size:",$.fontSize.lvl3,";&::placeholder{color:",c.NN600,";}&:focus{outline:none;border-color:",c.GN500,";}}"),M=Object(C.css)("margin-bottom:12px;display:flex;align-items:center;border:none;border-bottom:1px solid ",c.NN50,";padding:0 0 12px;cursor:pointer;background:transparent;text-align:left;width:100%;> img{width:48px;height:48px;object-fit:contain;margin-right:8px;border-radius:4px;}");var R=({layoutTracker:t})=>{const[e,a]=Object(n.useState)(!1),[i,o]=Object(n.useState)(""),l=u()(i,500),[,d]=Object(N.b)();Object(n.useEffect)((()=>{d({type:"SET_USER_CART_INFO",payload:{sellerNote:l}})}),[l,d]);return r.a.createElement("div",{className:U},e?r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{"data-testid":"txtPDPDetailNoteValue",id:"input-buyer-note",type:"text",className:B,value:i,onChange:t=>{var e;const a=(null===(e=t.target)||void 0===e?void 0:e.value)||"";a.length<=144&&o(a)},placeholder:"Contoh: Warna Putih, Size M",autoFocus:!0}),r.a.createElement("label",{htmlFor:"input-buyer-note",className:I.b},"Catatan untuk penjual"),r.a.createElement("button",{type:"button","data-testid":"btnPDPDetailCancelNote",className:V,onClick:()=>{o(""),a(!1),Object(A.a)({layoutTracker:t,clickAction:"cancel writing notes"})}},"Batalkan Catatan")):r.a.createElement("button",{type:"button","data-testid":"lblPDPDetailNoteToSeller",onClick:()=>{a(!0),Object(A.a)({layoutTracker:t,clickAction:"notes for seller"})}},r.a.createElement(_.a,{color:c.GN500,size:16}),r.a.createElement("b",null,"Tambah Catatan")))};const F=t=>({en:`This product's minimum quantity is ${t} item(s)`,id:`Minimal pembelian produk ini adalah ${t} barang`}),H=t=>({en:`Maximum quantity to purchase this item is ${t}`,id:`Maks. pembelian barang ini ${t} item, kurangi pembelianmu, ya!`});var q=({currentLevel:t,variantOptionID:e,variantChildren:a})=>a.find((({optionID:a=[]})=>a[t]===Number(e)))||{};var z=(t,e)=>t.find((t=>t.productID===e))||{};var G=t=>{const{variantCombination:e,selectedChildrenStock:a,selectedChildrenIsBuyable:n,variantChildren:r,productID:i,productStatus:o,isAllVariantLevelSelected:c}=t,{isBuyable:l,stock:d}=q({variantOptionID:e[0],currentLevel:0,variantChildren:r}).stock||{},{stock:s,isBuyable:u}=z(r,i).stock||{},p=c?!n&&a>0:!l&&Number(d)>0;return e.length>0?p:!u&&Number(s)>0&&"WAREHOUSE"===o};var W=t=>{const{productID:e,productStatus:a,selectedChildrenStock:n,variantChildren:r,variantCombination:i,isAllVariantLevelSelected:o}=t,{stock:c}=q({variantOptionID:i[0],currentLevel:0,variantChildren:r}).stock||{},{stock:l}=z(r,e).stock||{},d=o?0===n:0===Number(c);return i.length>0?d:0===Number(l)&&"WAREHOUSE"===a};function Q(t){const e=t.toString().length;if(4===e){return t.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.")}if(e>4&&e<7){const e=t.toString().replace(/\d{2}$/g,"");if("0"===e.slice(-1))return"".concat(e.slice(0,e.length-1)," rb");return"".concat(e," rb").replace(/(\d\s?rb$)/g,",$1")}if(e>6&&e<10){const e=t.toString().replace(/\d{5}$/g,"");if("0"===e.slice(-1))return"".concat(e.slice(0,e.length-1)," jt");return"".concat(e," jt").replace(/(\d\s?jt$)/g,",$1")}return e>9?t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):t.toString()}function K(t){return t.replace(/\./g,"")}const Y=t=>{var e;const{isVariantInactive:a,isVariantOOS:o,usedCampaign:l}=t,{isActive:d}=l,{selectedVariantID:s,productTotalStockFmt:u,variantCombination:p,variantData:m,selectedChildren:b}=Object(k.b)(),{productStock:v,productCampaign:g,productHasVariant:N}=Object(h.b)(),f=a||o,{variantStock:O,variantCampaign:I}=Object(n.useMemo)((()=>({variantStock:b.stock||{},variantCampaign:b.campaignInfo||{}})),[b.campaignInfo,b.stock]),y=Object(n.useMemo)((()=>{const t=Number(b.productID?I.stock:g.stock),e=Number(b.productID?O.stock:v.value);return d?t:e}),[g.stock,v.value,b.productID,d,I.stock,O]),C=p[0],j=null===(e=m[0])||void 0===e?void 0:e.option.find((t=>t.productVariantOptionID===String(C))),S=(null==j?void 0:j.stock)||"0",E=s>0,x=p[0]>0,D=Q(Number(x?S:K(u))),_=l.isActive?String(g.stock):v.value,A=E?Q(y):D,$=N?A:_,P=Object(n.useMemo)((()=>a?r.a.createElement("b",{style:{color:c.RN500}},"Tidak Dijual"):Number(K($))>=1&&Number(K($))<=10?r.a.createElement("b",{style:{color:c.YN600}},"Sisa ",$):"NaN"===$||0===Number(K($))?r.a.createElement("b",{style:{color:c.RN500}},"Habis"):r.a.createElement("b",null,$)),[a,$]);return r.a.createElement(i.default,{main:!0,body:2,margin:"12px 0","data-testid":"stock-label"},"Stok",0===p.length&&!f&&" Total",": ",P," ")};var J=Object(n.memo)(Y);const X=({usedCampaign:t,layoutTracker:e})=>{var a,l,s,p,y,C,j,S,E,x,_,A;const{productWholesale:$,productStock:P,productCampaign:V,productHasVariant:U,productInfoBasic:B,getProductVariant:{parentID:q}}=Object(h.b)(),{selectedChildren:z,variantChildren:Q,variantCombination:Y,selectedVariantID:X,isParentSelected:Z,variantData:tt}=Object(k.b)(),{userId:et}=Object(b.c)(),[,at]=Object(N.b)(),{lang:nt}=Object(n.useContext)(v.a),rt=null===(a=z.optionName)||void 0===a?void 0:a.join(", "),it=t.isActive?String(V.stock):P.value,ot=U?Q.some((({stock:t={}})=>!t.isBuyable&&Number(t.stock)>0)):Number(K(it))>0,ct=Object(n.useMemo)((()=>{var t,e;return Z&&0===Y.length?"WAREHOUSE"===B.status&&ot:G({productID:B.id,productStatus:B.status,selectedChildrenIsBuyable:Boolean(null===(t=z.stock)||void 0===t?void 0:t.isBuyable),selectedChildrenStock:Number(null===(e=z.stock)||void 0===e?void 0:e.stock),variantChildren:Q,variantCombination:Y,isAllVariantLevelSelected:X>0})}),[B.id,B.status,null===(l=z.stock)||void 0===l?void 0:l.isBuyable,null===(s=z.stock)||void 0===s?void 0:s.stock,Q,Y,X,Z,ot]),lt=Object(n.useMemo)((()=>{var t;return Z&&0===Y.length?"WAREHOUSE"===B.status&&0===Number(K(it)):W({productID:B.id,productStatus:B.status,selectedChildrenStock:Number(null===(t=z.stock)||void 0===t?void 0:t.stock),variantChildren:Q,variantCombination:Y,isAllVariantLevelSelected:X>0})}),[B.id,B.status,null===(p=z.stock)||void 0===p?void 0:p.stock,Q,Y,X,Z,it]),dt=ct||lt,st=dt?0:Number((null===(y=z.campaignInfo)||void 0===y?void 0:y.minOrder)||(null===(C=z.stock)||void 0===C?void 0:C.minimumOrder)||(()=>{if(U){var t,e;const a=Q.find((t=>Number(t.productID)===Number(B.id)));return(null==a||null===(t=a.campaignInfo)||void 0===t?void 0:t.minOrder)||(null==a||null===(e=a.stock)||void 0===e?void 0:e.minimumOrder)||0}return 0})()||B.minOrder||1),[ut,pt]=Object(n.useState)((()=>dt?0:st)),mt=u()(ut,250);Object(n.useEffect)((()=>{at({type:"SET_USER_CART_INFO",payload:{productCount:Number(mt)}})}),[at,mt]),Object(n.useEffect)((()=>{z.productID&&(pt(dt?0:st),at({type:"SET_USER_CART_INFO",payload:{productCount:Number(st)}}))}),[at,st,dt,z.productID]);const bt=Object(n.useMemo)((()=>Object(f.a)({productStock:P,productCampaign:V,productInfo:B,selectedVariant:z})),[V,B,P,z]),vt=(null===(j=z.stock)||void 0===j?void 0:j.maximumOrder)||0,gt=(null===(S=z.campaignInfo)||void 0===S?void 0:S.stock)||0,ht=B.maxOrder||0,kt=V.stock,Nt=z.productID?gt:kt,ft=Number(z.productID?vt:ht),Ot=(t,e)=>r.a.createElement(i.default,{body:3,margin:"8px 0 0",color:c.RN600},t(m()(String(e)))[nt]),It=null===(E=$[0])||void 0===E?void 0:E.minQty,yt=null===(x=tt[0])||void 0===x||null===(_=x.option.find((t=>{var e;return t.productVariantOptionID===String(null===(e=z.optionID)||void 0===e?void 0:e[0])})))||void 0===_||null===(A=_.picture)||void 0===A?void 0:A.urlThumbnail;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",{className:T},"Atur jumlah dan catatan"),z.productID&&r.a.createElement("button",{onClick:()=>{var t,a;window.scrollTo({behavior:"smooth",top:0,left:0}),Object(O.a)({layoutTracker:e,productChildId:z.productID,productId:q,shopId:B.shopID,userId:String(et),variantLevel:null===(t=z.optionID)||void 0===t||null===(a=t.map(((t,e)=>e+1)))||void 0===a?void 0:a.join(","),variantValue:rt,variantName:tt.map((t=>t.name)).join(",")})},type:"button",className:M,"aria-live":"assertive","aria-atomic":"true"},yt&&r.a.createElement("img",{src:yt,alt:"",role:"presentation"}),r.a.createElement(i.default,{body:"display-2",margin:"0",main:!0},r.a.createElement("span",{className:I.b},"Terpilih: "),rt)),r.a.createElement("div",{className:w,"data-testid":"quantityOrder"},r.a.createElement(o.a,{id:"qty-editor-atc",disabled:dt,max:bt,min:st,spinner:1,value:m()(String(ut)),onChange:t=>{const e=K(t);let a=Number(e);a>g.N&&(a=g.N),pt(a)},onBlur:d.a}),r.a.createElement("label",{className:I.b,htmlFor:"qty-editor-atc"},"jumlah"),r.a.createElement(J,{isVariantInactive:ct,isVariantOOS:lt,usedCampaign:t})),ut<st&&Ot(F,st),ut>bt&&bt>0&&Ot(H,bt),!dt&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:L},st>1&&r.a.createElement(i.default,{margin:"4px 0",body:"display-3","data-testid":"lblPDPMinPurchase"},"Min. pembelian ",st," pcs"),t.isActive&&ft>0&&ft!==Nt&&r.a.createElement(i.default,{margin:"4px 0",body:"display-3","data-testid":"lblPDPMaxPurchase"},"Max. pembelian ",ft," pcs"),It&&r.a.createElement(i.default,{margin:"4px 0",body:"display-3","data-testid":"lblPDPGrosir"},"Beli \u2265 ",It,", lebih hemat!")),r.a.createElement(R,{layoutTracker:e})),r.a.createElement(D,{productWholesale:$,usedCampaign:t,quantity:ut}))};e.default=Object(n.memo)(X)}}]);