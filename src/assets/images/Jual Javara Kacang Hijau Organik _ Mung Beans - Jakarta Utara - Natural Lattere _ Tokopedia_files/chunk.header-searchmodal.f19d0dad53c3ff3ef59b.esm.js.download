(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[338],{1082:function(e,t,a){"use strict";var r=a(1104),n=a.n(r);t.a=e=>{if(!e||"string"!=typeof e)return e;const t=e.match(/[\w\d-\.\+]+@[\w\d-]+((\.[\w]+)+)?/gi);if(!t)return e;let a=e;return t.forEach((e=>{a=a.replace(e,n()(e))})),a}},1104:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(u=e.split("@"),d=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o=[],c=!0,s=!1;try{for(a=a.call(e);!(c=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);c=!0);}catch(i){s=!0,n=i}finally{try{c||null==a.return||a.return()}finally{if(s)throw n}}return o}}(u,d)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}(u,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=t[0],r=t[1],c=Math.min(Math.ceil(a.length/2),5),s=a.slice(0,c),i=10-s.length,l=i>0?n.default("*",i):"";var u,d;return s+l+"@"+r};var r,n=(r=a(1112))&&r.__esModule?r:{default:r};function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}},1112:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a=e.length*t,r=Math.floor(Math.log(t)/Math.log(2)),n=e;for(;r;)n+=e,r-=1;return n+=n.substring(0,a-n.length)}},2213:function(e,t,a){"use strict";var r=a(0),n=a(356);t.a=()=>{const e=Object(r.useContext)(n.a);if(void 0===e)throw new Error("Search Modal's Context must be within Search Modal's Provider");return e}},2436:function(e,t,a){"use strict";var r=a(17);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.default}});var n=r(a(4386))},2655:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(0);var n=e=>{const t=e.component,a=e.template,n=e.dataKey;return(0,r.isValidElement)(t)?(0,r.cloneElement)(t,{template:a,dataKey:n}):null};t.default=n},4385:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(4),c=a(2436),s=a.n(c);const i=Object(o.default)({resolved:{},chunkName:()=>"searchmodal-initialstate",isReady(e){const t=this.resolve(e);return!1!==this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(0),a.e(91),a.e(898),a.e(643)]).then(a.bind(null,3941)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 3941}},{fallback:n.a.createElement(s.a,null)});t.a=i},4386:function(e,t,a){"use strict";var r=a(17);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(a(0)),o=a(19),c=r(a(175)),s=a(4387);var i=e=>{const t=e.className,a=e.width,r=void 0===a?36:a,i=(0,o.cx)(s.wrapperCx,t);return n.default.createElement("div",{className:i},n.default.createElement(c.default,{indeterminate:!0,width:r}))};t.default=i},4387:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapperCx=void 0;const r=(0,a(19).css)("display:flex;justify-content:center;");t.wrapperCx=r},4388:function(e,t,a){"use strict";var r=a(0),n=a.n(r),o=a(4),c=a(2436),s=a.n(c);const i=Object(o.default)({resolved:{},chunkName:()=>"searchmodal-autocomplete",isReady(e){const t=this.resolve(e);return!1!==this.resolved[t]&&!!a.m[t]},importAsync:()=>Promise.all([a.e(0),a.e(91),a.e(897),a.e(642)]).then(a.bind(null,3997)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return a(t)},resolve(){return 3997}},{fallback:n.a.createElement(s.a,null)});t.a=i},4389:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTabItems=t.LOCAL_SEARCH_PLACEHOLDER=t.INITIALSTATE_SEARCHBOX_COMPONENT_ID=t.DEFAULT_PLACEHOLDER=t.AUTOCOMPLETE_SEARCHBOX_COMPONENT_ID=void 0;t.INITIALSTATE_SEARCHBOX_COMPONENT_ID="01.07.00.00";t.AUTOCOMPLETE_SEARCHBOX_COMPONENT_ID="02.01.00.00";t.LOCAL_SEARCH_PLACEHOLDER="Cari barang di sini";t.DEFAULT_PLACEHOLDER="Cari di Tokopedia";t.defaultTabItems=[{value:""}]},754:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(22),c=a.n(o),s=a(236),i=a(2655),l=a.n(i),u=a(699),d=a.n(u),p=a(686),m=a(2213);const v={container:"",search:"txtHeaderSearchBar"},h=[2,3],f=[1,3];var _=a(4385),b=a(4388),g=a(38),y=a(105),S=a.n(y);var O=e=>{var t,a,r,n,o;const{customParams:c}=e,{search:s}=Object(g.l)(),i=S.a.parse(s),l=(null===(t=i.st)||void 0===t?void 0:t.toString())||"",u=c.navsource||(null===(a=i.navsource)||void 0===a?void 0:a.toString())||"",d=c.srp_page_id||(null===(r=i.srp_page_id)||void 0===r?void 0:r.toString())||"",p=Boolean(d&&u),m=c.srp_page_title||(null===(n=i.srp_page_title)||void 0===n?void 0:n.toString())||"";return{activeTab:l,isLocalSearch:p,navsource:u,searchKeyword:(null===(o=i.q)||void 0===o?void 0:o.toString())||"",srpPageId:d,srpPageTitle:m}},T=a(1082),E=a(8);var k=(e,t)=>"impression"===t?f.some((t=>t===e)):"click"===t&&h.some((t=>t===e));var P=e=>{const{events:t,pageSource:a}=e,n=e=>{const{trackingOption:t,...r}=e;k(t,"impression")&&(e=>{const{keyword:t,valueId:a,valueName:r,campaignCode:n,component:o,destinationUrl:c,pageSource:s}=e,i={event:"viewSearchIris",eventAction:"impression",eventCategory:"search component",eventLabel:`keyword:${Object(T.a)(t)||"none"} | value_id:${a||"none"} | value_name:${r||"none"}`,businessUnit:"Physical Goods",currentSite:"tokopediamarketplace",pageDestination:c||"none",campaignCode:n||"none",component:o,pageSource:s};E.default.pushObject(i)})({...r,pageSource:a})},o=e=>{const{trackingOption:t,...r}=e;k(t,"click")&&(e=>{const{keyword:t,valueId:a,valueName:r,campaignCode:n,component:o,destinationUrl:c,pageSource:s}=e,i={event:"clickSearch",eventAction:"click",eventCategory:"search component",eventLabel:`keyword:${Object(T.a)(t)||"none"} | value_id:${a||"none"} | value_name:${r||"none"}`,businessUnit:"Physical Goods",currentSite:"tokopediamarketplace",pageDestination:c||"none",campaignCode:n||"none",component:o,pageSource:s};E.default.pushObject(i)})({...r,pageSource:a})};Object(r.useEffect)((()=>(t.on("@search_modal/unified_track_click",o),t.on("@search_modal/unified_track_view",n),()=>{t.off("@search_modal/unified_track_click",o),t.off("@search_modal/unified_track_view",n)})))};var A=e=>{const{activeTab:t,customPathname:a,keyword:r,modalType:n,navsource:o,selectedSearch:c,srpPageId:s,srpPageTitle:i}=e;let l="";const u=a&&"Di Tokopedia"!==c?a:"",d="Di Tokopedia"===c;return l=u?`${u}?q=${encodeURIComponent(r)}`:`/search?st=${t}&q=${encodeURIComponent(r)}`,n===p.ModalTypeEnum.INITIALSTATE?l+="&srp_component_id=01.07.00.00":n===p.ModalTypeEnum.AUTOCOMPLETE&&(l+="&srp_component_id=02.01.00.00"),"os"===o?l+="&official=true&navsource=os":"home"===o&&(l+=`&navsource=${o}`),d||(l+=`&srp_page_id=${s}&srp_page_title=${i}&navsource=${o}`),l};var C=e=>{const{activeTab:t,baseSRPApplink:a,customParams:n,events:o,isLocalSearch:c,navsource:s,pageSource:i,srpPageId:l,srpPageTitle:u}=e,d=Object(g.k)(),[p,m]=Object(r.useState)(!1),[v,h]=Object(r.useState)(!1),f=Object(r.useCallback)((e=>{const{item:t}=e,a=t.value===`Di ${u}`;m(a)}),[u,m]),_=Object(r.useCallback)((()=>{h(!0)}),[]),b=Object(r.useCallback)((()=>{h(!1)}),[]),y=Object(r.useCallback)((e=>{const{event:t}=e;t.preventDefault(),(e=>{const t={event:"clickSearch",eventAction:"click search bar",eventCategory:"search component",eventLabel:"",businessUnit:"Physical Goods",currentSite:"tokopediamarketplace",pageSource:e};E.default.pushObject(t)})(i)}),[i]),S=Object(r.useCallback)((e=>{const{keyword:r,selected:o,modalType:c}=e;window.scrollTo({top:0,behavior:"smooth"}),h(!1);const i=A({activeTab:t,customParams:n,customPathname:a,keyword:r,modalType:c,navsource:s,selectedSearch:o,srpPageId:l,srpPageTitle:u});d.push(i)}),[t,a,n,d,s,l,u]);return Object(r.useEffect)((()=>(o.on("@search_modal/change_keyword",_),o.on("@search_modal/change_select_search",f),o.on("@search_modal/click_search_bar",y),o.on("@search_modal/close_modal",b),o.on("@search_modal/submit_keyword",S),()=>{o.off("@search_modal/change_keyword",_),o.off("@search_modal/change_select_search",f),o.off("@search_modal/click_search_bar",y),o.off("@search_modal/close_modal",b),o.off("@search_modal/submit_keyword",S)}))),Object(r.useEffect)((()=>{m(c)}),[c]),{isLocalSelected:p,isTyping:v}},L=a(4389);var I=e=>{const{isLocalSearch:t,pageTitle:a}=e,[n,o]=Object(r.useState)(L.defaultTabItems);return Object(r.useEffect)((()=>{t&&o([{value:`Di ${a}`},{value:"Di Tokopedia"}])}),[t,a]),n};t.default=e=>{const{userId:t,uniqueId:a,addressData:r,customParams:o,baseSRPApplink:i,pageSource:u}=e,{events:h}=Object(m.a)(),{theme:f}=Object(s.useThemeContext)(),{activeTab:g,isLocalSearch:y,navsource:S,searchKeyword:T,srpPageId:E,srpPageTitle:k}=O({customParams:o}),{isLocalSelected:A,isTyping:L}=C({activeTab:g,baseSRPApplink:i,customParams:o,events:h,isLocalSearch:y,navsource:S,pageSource:u,srpPageTitle:k,srpPageId:E}),w=I({isLocalSearch:y,pageTitle:k}),j=y?"Cari barang di sini":"",D="dark"===f;return P({events:h,pageSource:u}),n.a.createElement(c.a,{render:()=>null,source:"search-modal-desktop",debug:!0},n.a.createElement(d.a,{customSearchbarPlaceholder:j,dataTestIds:v,events:h,isLoggedIn:t>0,searchBarOptions:w,withSearchBar:y,initialKeyword:T},n.a.createElement(l.a,{template:p.ModalTypeEnum.INITIALSTATE,component:n.a.createElement(_.a,{addressData:r,baseSRPApplink:i,isDarkTheme:D,isLocalSearch:y,isLocalSelected:A,navsource:S,srpPageId:E,srpPageTitle:k,userId:t,uniqueId:a})}),n.a.createElement(l.a,{template:p.ModalTypeEnum.AUTOCOMPLETE,component:n.a.createElement(b.a,{addressData:r,baseSRPApplink:i,isDarkTheme:D,isLocalSearch:y,isLocalSelected:A,isTyping:L,navsource:S,srpPageId:E,srpPageTitle:k,uniqueId:a,userId:t})})))}}}]);