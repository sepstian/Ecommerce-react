(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[536],{2890:function(e,n,t){"use strict";t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return o})),t.d(n,"e",(function(){return s}));const a="pdp-tdn8",r="pdp-tdn3",i=8,o=3,s=3},4189:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(2),o=t(5735),s=t.n(o),d=t(1398),c=t(1100),l=t(1);const p=Object(i.css)("display:none;"),u=Object(i.css)("border-bottom:1px solid ",l.NN50,";"),g=Object(i.css)("padding:16px 0 24px;");var m=t(2890);n.default=({dataTestId:e=m.a,dimenId:n=m.c,withBorderBottom:t,onLoadTracker:o})=>{const{fireComponentTracker:l}=Object(d.a)({onLoadTracker:o,isManuallyFired:!0}),{productInfoBasic:b,user:h}=Object(c.b)(),_=Object(a.useRef)(null),f=Object(i.cx)(g,{[u]:t});return r.a.createElement("div",{ref:_,className:f},r.a.createElement(s.a,{device:"desktop",userID:Number(h.data.id),dimensionID:n,inventoryID:m.e,productID:Number(b.id),"data-testid":e,onSuccess:e=>{"object"==typeof e&&Object.keys(e).length>1||null===_.current||(_.current.className=p)},onImpression:l}))}},5735:function(e,n,t){n.__esModule=!0;const a=t(6656);n.default=a.default},6656:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return j}));var a=t(19),r=t(0),i=t.n(r),o=function(){},s={1:[600,600],2:[600,100],3:[1200,400],4:[960,240],5:[600,200],6:[600,150],7:[1980,150],8:[1200,150],9:[1980,110]},d=t(626),c=t.n(d),l=t(15),p=t(27),u=t(32),g=t(14),m=t.n(g),b=t(4148),h=t(10),_={nextPageToken:"",error:{code:0,message:""},data:{id:0,name:"",tracking:{click:"",impression:""},image:{url:"",dimension:{width:0,height:0}}}},f={development:"https://gql-staging.tokopedia.com/graphql",staging:"https://gql-staging.tokopedia.com/graphql",test:"https://gql-staging.tokopedia.com/graphql",production:"https://gql.tokopedia.com/graphql",beta:"https://gql-beta.tokopedia.com/graphql"}[(t.n(h).a?window.NODE_ENV:"")||"production"],v=function(e){var n={topadsDisplayBannerAdsV3:{__typename:"DisplayBannerAdsV3",data:[],header:{__typename:"BannerHeader",pagination:{__typename:"BannerPagination",next_page_token:"",kind:""}},status:{__typename:"Status",error_code:0,message:""}}},t=(e||n).topadsDisplayBannerAdsV3||n.topadsDisplayBannerAdsV3,a=((t.header||n.topadsDisplayBannerAdsV3.header).pagination||n.topadsDisplayBannerAdsV3.header.pagination).next_page_token||n.topadsDisplayBannerAdsV3.header.pagination.next_page_token,r=t.status||n.topadsDisplayBannerAdsV3.status,i=r.error_code||n.topadsDisplayBannerAdsV3.status.error_code,o=r.message||n.topadsDisplayBannerAdsV3.status.message,s=t.data||n.topadsDisplayBannerAdsV3.data,d=Object(l.a)({},_.data);return{nextPageToken:a,error:{code:i,message:o},data:s.reduce((function(e,n){if(n){var t,a,r=(null===(t=n.banner)||void 0===t?void 0:t.Images)||[],i=Object(l.a)({},_.data.image),o=r.reduce((function(e,n){var t,a,r=Object(l.a)({},e);n&&(r.url=n.Url||"",r.dimension.width=(null===(t=n.Dimension)||void 0===t?void 0:t.Height)||0,r.dimension.height=(null===(a=n.Dimension)||void 0===a?void 0:a.Width)||0);return r}),i);e.tracking.click=n.ad_click_url||"",e.tracking.impression=n.ad_view_url||"",e.image=o,e.id=n.id||0,e.name=(null===(a=n.banner)||void 0===a?void 0:a.Name)||""}return e}),d)}},k=function(e){var n=e.dimensionID,t=e.nextPageToken,a=e.userID,r=e.productID,i=e.depID,o=e.keyword,s=e.device,d=e.inventoryID,c=Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({dimen_id:String(n),ep:"banner",device:s,inventory_id:String(d),user_id:String(a),item:"1"},t?{page_token:t}:{}),i?{dep_id:String(i)}:{}),r?{product_id:String(r)}:{}),o?{q:o}:{});return new URLSearchParams(c).toString()},D=function(e){var n=e.onSuccess,t=void 0===n?o:n,a=e.onError,i=void 0===a?o:a,s=Object(b.useGlobalData)(),d=s.nextPageToken,g=s.setPageToken,h=Object(r.useState)(!0),D=Object(u.a)(h,2),y=D[0],O=D[1],I=Object(r.useState)(_),j=Object(u.a)(I,2),x=j[0],S=j[1],B=c()((function(){var n;(n=Object(p.a)(m.a.mark((function n(){var a,r,o,s,c,p;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=k(Object(l.a)(Object(l.a)({},e),{},{nextPageToken:d})),r={params:a},n.next=5,fetch("".concat(f,"/TAGetDisplayBanner"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\nquery GetDisplayBannerAds($params: String!) {\n  topadsDisplayBannerAdsV3(displayBannnerParams: $params) {\n    data {\n      id\n      ad_ref_key\n      ad_view_url\n      ad_click_url\n      redirect\n      banner {\n        Name\n        Position\n        Images {\n          Dimension {\n            Id\n            Height\n            Width\n          }\n          Url\n        }\n        CategoryIDs\n        Shop {\n          ShopID\n          ShopName\n          ShopImage {\n            cover\n            cover_ecs\n            s_ecs\n            s_url\n            xs_ecs\n            xs_url\n          }\n          ShopDomain\n          ShopTagline\n          ShopCityName\n          ShopIsOfficial\n          IsPowerMerchant\n          IsPowerMerchantBadge\n        }\n      }\n    }\n    status {\n      error_code\n      message\n    }\n    header {\n      pagination {\n        kind\n        next_page_token\n      }\n    }\n  }\n}\n",variables:r})});case 5:if((o=n.sent).ok){n.next=9;break}throw{status:o.status,text:o.statusText};case 9:return n.next=11,o.json();case 11:if(s=n.sent,c=(null==s?void 0:s.errors)||[],!((p=v(s.data)).error.code>0||c.length>0)){n.next=19;break}throw{generalError:c,errorFromResponseData:p.error};case 19:S(p),g(p.nextPageToken),t(p.data);case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(0),i(),console.error("lite-tdn:",JSON.stringify(n.t0));case 28:O(!1);case 29:case"end":return n.stop()}}),n,null,[[0,24]])}))),function(){return n.apply(this,arguments)})()}),{},!0);return{isLoading:y,data:x,bannerEle:B}},y=function(e){var n=e.device,t=e.dimensionID,a=e.userID,i=e.inventoryID,s=e.keyword,d=e.onImpression,l=void 0===d?o:d,p=e.productID,u=D({device:n,dimensionID:t,userID:a,inventoryID:i,keyword:s,productID:p}),g=u.isLoading,m=u.data,b=u.bannerEle,h=m.data,_=Object(r.useCallback)((function(){var e=h.tracking.impression;e&&(l(h),fetch("".concat(e,"&render=false"),{method:"GET",credentials:"include"}).catch((function(e){console.error("lite-tdn: ","Failed to commit TopAds banner impression: ".concat(JSON.stringify(e)))})))}),[l,h]),f=c()(_,{},!0);return{isLoading:g,banner:m.data,bannerEle:b,intersectOfTracking:f}},O=function(e,n){return Object(a.css)("height:",n||48,"px;width:",e?"".concat(e,"px"):"100%",";border-radius:4px;background-color:var(--NN200,#d6dfeb);")},I=Object(a.css)("width:100%;position:absolute;top:0;left:0;bottom:0;right:0;"),j=function(e){var n,t,r,d,c=e.dimensionID,l=e.inventoryID,p=e.dataTestID,u=e.onClick,g=void 0===u?o:u,m=e.className,b=e.loaderHeight,h=e.loaderWidth,_=y(e),f=_.isLoading,v=_.banner,k=_.bannerEle,D=_.intersectOfTracking,j=(t=(n=s[c])[0],r=n[1],Number(parseFloat(String(r/t*100)).toFixed(2)));return f?i.a.createElement("div",{ref:k,className:O(h,b)}):v.image.url?i.a.createElement("div",{ref:k,className:Object(a.cx)((d=j,Object(a.css)("display:block;position:relative;padding-top:",d,"%;")),m)},i.a.createElement("a",{ref:D,href:v.tracking.click,"data-id":"lite-tdn-".concat(v.id),"data-inventory_id":l,"data-dimen_id":c,"data-testid":p||"tdn-banner",onClick:function(){return g(v)}},i.a.createElement("img",{className:I,src:v.image.url,alt:"Topads Banner"}))):i.a.createElement(i.a.Fragment,null)}}}]);